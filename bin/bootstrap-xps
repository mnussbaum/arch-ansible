#! /bin/bash

set -o errexit
set -o nounset

source bin/_bootstrap.sh

# parted --align optimal /dev/nvme0n1
# > unit MiB
# > mkpart primary ext4 END_OF_A_PART (81174MB) END_OF_A_PART+512MB (81686MB)
# > name 7 "Grub"
# > mkpart primary ext4 END_OF_A_PART+512MB (81686MB) BEGINNING_OF_NEXT_PART_OR_EOF (499984MB)
# > name 8 "Arch Root"

hostname="tecopa"
username="mnussbaum"
disk="/dev/nvme0n1"
ssid="BAM"
wireless_card="wlp60s0"

bootstrap "$hostname" "$username" "$disk" "$ssid" "$wireless_card"

# After rebooting:
# sudo systemctl start NetworkManager
# sudo cp -r /root/arch-ansible ~/src
# cd ~/src/arch-ansible
# ./bin/ansible # This should succeed to the point of secret setup
# gpg --import ~/gpg-keys/private-key.asc
# gpg --import ~/gpg-keys/public-key.asc
# rm -rf ~/gpg-keys
# shutdown -r now # Amongst other reasons this activates gpg-agent
# ssh-add  # Adds SSH key to gpg-agent
# ./bin/ansible

# TODO
# * Automate partitioning
