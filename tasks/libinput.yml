# vim:ft=yaml.ansible:
---
- name: libinput | Install packages
  package:
    state: present
    name:
      - libinput
      - libinput-gestures
      - xdotool
      - xf86-input-libinput
  become: true

- name: libinput | Make config dir
  become: true
  file:
    path: /etc/libinput/xorg.conf.d
    state: directory

- name: libinput | Install xorg multitouch config
  copy:
    dest: /etc/libinput/xorg.conf.d/99-multitouch.conf
    src: xorg-multitouch.conf
  become: true

- name: libinput | Install libinput-gestures service
  become: true
  copy:
    dest: /etc/systemd/system/libinput-gestures.service
    src: libinput-gestures.service

- name: libinput | Install libinput-gestures.conf
  become: true
  copy:
    dest: /etc/libinput-gestures.conf
    src: libinput-gestures.conf

- name: libinput | Enable libinput-gestures service
  become: true
  when: ansible_virtualization_role != "guest"
  systemd:
    enabled: true
    name: libinput-gestures.service
    daemon-reload: true
