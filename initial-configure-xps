#! /bin/bash

set -o errexit
set -o nounset

hostname="$1"
shift

hostnamectl set-hostname "$hostname"

sed -i "/en_US.UTF-8/ s/# *//" /etc/locale.gen
locale-gen
localectl set-locale LANG=en_US.UTF-8
export LANG=en_US.UTF-8
timedatectl set-timezone America/Los_Angeles

hwclock --systohc --utc
pacman-key --refresh-keys

pacman -Syu --noconfirm \
  archlinux-keyring \
  ansible \
  inetutils \
  python \
  python-passlib \
  vim \
  zsh \
  parted
